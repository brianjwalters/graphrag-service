{
  "summary": {
    "total_tests": 11,
    "successful": 6,
    "failed": 5,
    "errors": 0,
    "success_rate": 54.54545454545454,
    "avg_response_time_ms": 474.64
  },
  "results": [
    {
      "test_name": "Health Ping",
      "endpoint": "/health/ping",
      "method": "GET",
      "status": "success",
      "response_time": 120.8488941192627,
      "status_code": 200,
      "error": null,
      "data": {
        "status": "healthy",
        "service": "graphrag-service",
        "version": "1.0.0",
        "dependencies": {
          "supabase": "healthy",
          "prompt_service": "unhealthy: All connection attempts failed"
        },
        "metrics": {
          "uptime_seconds": 0,
          "environment": "production"
        },
        "graph_stats": null
      }
    },
    {
      "test_name": "Health Metrics",
      "endpoint": "/health/metrics",
      "method": "GET",
      "status": "success",
      "response_time": 159.21902656555176,
      "status_code": 200,
      "error": null,
      "data": {
        "service": "graphrag-service",
        "timestamp": "2025-08-30T21:14:45.869561",
        "system_metrics": {
          "cpu_percent": 0.0,
          "memory_mb": 196.3125,
          "memory_percent": 0.05078361381656652,
          "num_threads": 133,
          "num_connections": 4
        },
        "processing_metrics": {
          "graphs_created": 0,
          "total_entities_processed": 0,
          "total_relationships_discovered": 0,
          "total_communities_detected": 0,
          "average_processing_time": 0,
          "error_rate": 0
        },
        "config_metrics": {
          "entity_similarity_threshold": 0.85,
          "leiden_resolution": 1.0,
          "min_community_size": 3,
          "max_community_size": 50,
          "batch_size": 100
        },
        "status": "operational"
      }
    },
    {
      "test_name": "Create Simple Graph",
      "endpoint": "/graph/create",
      "method": "POST",
      "status": "success",
      "response_time": 708.3630561828613,
      "status_code": 200,
      "error": null,
      "data": {
        "success": true,
        "graph_id": "graph_test_doc_001_1756588485",
        "document_id": "test_doc_001",
        "graph_summary": {
          "nodes_created": 2,
          "edges_created": 1,
          "communities_detected": 0,
          "deduplication_rate": 0.0,
          "graph_density": 1.0,
          "processing_time_seconds": 0.705101490020752
        },
        "quality_metrics": {
          "graph_completeness": 1.0,
          "community_coherence": 0.0,
          "entity_confidence_avg": 0.925,
          "relationship_confidence_avg": 0.85,
          "coverage_score": 0.0,
          "warnings": [
            "Low community coverage - many isolated entities"
          ],
          "suggestions": [
            "Graph has fewer relationships than entities - consider relationship inference"
          ]
        },
        "communities": [],
        "analytics": {
          "top_entities": [
            {
              "entity_id": "ent_001",
              "degree_centrality": 1.0,
              "pagerank": 0.5,
              "betweenness": 0.0,
              "entity_text": "Supreme Court",
              "entity_type": "COURT"
            },
            {
              "entity_id": "ent_002",
              "degree_centrality": 1.0,
              "pagerank": 0.5,
              "betweenness": 0.0,
              "entity_text": "John Doe",
              "entity_type": "PARTY"
            }
          ],
          "relationship_types": {
            "DECIDED_CASE": 1
          },
          "cross_document_connections": 0,
          "entity_type_distribution": {
            "COURT": 1,
            "PARTY": 1
          },
          "average_degree": 0.0,
          "clustering_coefficient": 0.0,
          "legal_metrics": null,
          "temporal_analysis": null
        },
        "deduplication": {
          "original_count": 2,
          "deduplicated_count": 2,
          "merge_operations": 0,
          "merged_entities": [],
          "canonical_mappings": {}
        },
        "storage_info": {
          "entities_stored": 2,
          "relationships_stored": 1,
          "communities_stored": 0,
          "errors": [
            "{'message': \"Could not find the 'processing_status' column of 'graph_document_registry' in the schema cache\", 'code': 'PGRST204', 'hint': None, 'details': None}"
          ]
        },
        "processing_metadata": {
          "timestamp": "2025-08-30T21:14:46.577818",
          "processing_time": 0.705101490020752,
          "options_used": {
            "enable_deduplication": true,
            "enable_community_detection": true,
            "enable_cross_document_linking": true,
            "enable_analytics": true,
            "similarity_threshold": null,
            "leiden_resolution": 1.0,
            "min_community_size": 2,
            "focus_entity_types": null,
            "exclude_entity_types": null,
            "use_ai_summaries": false,
            "batch_mode": false
          }
        },
        "errors": [],
        "warnings": []
      }
    },
    {
      "test_name": "Create Complex Graph",
      "endpoint": "/graph/create",
      "method": "POST",
      "status": "success",
      "response_time": 454.39696311950684,
      "status_code": 200,
      "error": null,
      "data": {
        "success": true,
        "graph_id": "graph_test_doc_complex_001_1756588486",
        "document_id": "test_doc_complex_001",
        "graph_summary": {
          "nodes_created": 16,
          "edges_created": 8,
          "communities_detected": 0,
          "deduplication_rate": 0.19999999999999996,
          "graph_density": 0.06666666666666667,
          "processing_time_seconds": 0.44980359077453613
        },
        "quality_metrics": {
          "graph_completeness": 0.6666666666666666,
          "community_coherence": 0.0,
          "entity_confidence_avg": 0.8864583333333333,
          "relationship_confidence_avg": 0.8075,
          "coverage_score": 0.0,
          "warnings": [
            "Low community coverage - many isolated entities"
          ],
          "suggestions": [
            "Graph has fewer relationships than entities - consider relationship inference"
          ]
        },
        "communities": [],
        "analytics": {
          "top_entities": [
            {
              "entity_id": "ent_004",
              "degree_centrality": 0.13333333333333333,
              "pagerank": 0.10086904694692694,
              "betweenness": 0.09523809523809525,
              "entity_text": "Entity 4",
              "entity_type": "COURT"
            },
            {
              "entity_id": "ent_008",
              "degree_centrality": 0.13333333333333333,
              "pagerank": 0.10846965889482835,
              "betweenness": 0.05714285714285715,
              "entity_text": "Entity 8",
              "entity_type": "COURT"
            },
            {
              "entity_id": "ent_005",
              "degree_centrality": 0.13333333333333333,
              "pagerank": 0.098736548718374,
              "betweenness": 0.1142857142857143,
              "entity_text": "Entity 5",
              "entity_type": "PARTY"
            },
            {
              "entity_id": "ent_006",
              "degree_centrality": 0.13333333333333333,
              "pagerank": 0.09904630255800706,
              "betweenness": 0.1142857142857143,
              "entity_text": "Entity 6",
              "entity_type": "ATTORNEY"
            },
            {
              "entity_id": "ent_003",
              "degree_centrality": 0.13333333333333333,
              "pagerank": 0.10615505982834328,
              "betweenness": 0.05714285714285715,
              "entity_text": "Entity 3",
              "entity_type": "JUDGE"
            },
            {
              "entity_id": "ent_007",
              "degree_centrality": 0.13333333333333333,
              "pagerank": 0.10193923874634783,
              "betweenness": 0.09523809523809525,
              "entity_text": "Entity 7",
              "entity_type": "JUDGE"
            },
            {
              "entity_id": "ent_012",
              "degree_centrality": 0.06666666666666667,
              "pagerank": 0.09174311926605502,
              "betweenness": 0.0,
              "entity_text": "Entity 12",
              "entity_type": "COURT"
            },
            {
              "entity_id": "ent_009",
              "degree_centrality": 0.06666666666666667,
              "pagerank": 0.06014162977115504,
              "betweenness": 0.0,
              "entity_text": "Entity 9",
              "entity_type": "PARTY"
            },
            {
              "entity_id": "ent_002",
              "degree_centrality": 0.06666666666666667,
              "pagerank": 0.058587468664457826,
              "betweenness": 0.0,
              "entity_text": "Entity 2",
              "entity_type": "ATTORNEY"
            },
            {
              "entity_id": "ent_011",
              "degree_centrality": 0.06666666666666667,
              "pagerank": 0.09174311926605502,
              "betweenness": 0.0,
              "entity_text": "Entity 11",
              "entity_type": "JUDGE"
            }
          ],
          "relationship_types": {
            "REPRESENTS": 4,
            "CITES": 2,
            "DECIDED_CASE": 2
          },
          "cross_document_connections": 0,
          "entity_type_distribution": {
            "COURT": 5,
            "PARTY": 3,
            "ATTORNEY": 4,
            "JUDGE": 4
          },
          "average_degree": 0.0,
          "clustering_coefficient": 0.0,
          "legal_metrics": null,
          "temporal_analysis": null
        },
        "deduplication": {
          "original_count": 20,
          "deduplicated_count": 16,
          "merge_operations": 3,
          "merged_entities": [
            {
              "canonical_id": "ent_017",
              "canonical_text": "Entity 1",
              "merged_entities": [
                {
                  "entity_id": "ent_001",
                  "entity_text": "Entity 1",
                  "confidence": 0.81
                },
                {
                  "entity_id": "ent_013",
                  "entity_text": "Entity 13",
                  "confidence": 0.93
                }
              ],
              "cluster_size": 3,
              "avg_confidence": 0.9033333333333333
            },
            {
              "canonical_id": "ent_018",
              "canonical_text": "Entity 10",
              "merged_entities": [
                {
                  "entity_id": "ent_010",
                  "entity_text": "Entity 10",
                  "confidence": 0.9
                }
              ],
              "cluster_size": 2,
              "avg_confidence": 0.94
            },
            {
              "canonical_id": "ent_019",
              "canonical_text": "Entity 15",
              "merged_entities": [
                {
                  "entity_id": "ent_015",
                  "entity_text": "Entity 15",
                  "confidence": 0.9500000000000001
                }
              ],
              "cluster_size": 2,
              "avg_confidence": 0.97
            }
          ],
          "canonical_mappings": {
            "ent_001": "ent_017",
            "ent_013": "ent_017",
            "ent_010": "ent_018",
            "ent_015": "ent_019"
          }
        },
        "storage_info": {
          "entities_stored": 0,
          "relationships_stored": 0,
          "communities_stored": 0,
          "errors": [
            "{'message': 'duplicate key value violates unique constraint \"nodes_node_id_key\"', 'code': '23505', 'hint': None, 'details': 'Key (node_id)=(ent_002) already exists.'}"
          ]
        },
        "processing_metadata": {
          "timestamp": "2025-08-30T21:14:47.032303",
          "processing_time": 0.44980359077453613,
          "options_used": {
            "enable_deduplication": true,
            "enable_community_detection": true,
            "enable_cross_document_linking": true,
            "enable_analytics": true,
            "similarity_threshold": 0.85,
            "leiden_resolution": 1.0,
            "min_community_size": 3,
            "focus_entity_types": null,
            "exclude_entity_types": null,
            "use_ai_summaries": false,
            "batch_mode": false
          }
        },
        "errors": [],
        "warnings": []
      }
    },
    {
      "test_name": "Query Graph Entities",
      "endpoint": "/graph/query",
      "method": "POST",
      "status": "success",
      "response_time": 6.317377090454102,
      "status_code": 200,
      "error": null,
      "data": {
        "query_type": "entities",
        "result_count": 0,
        "entities": [],
        "relationships": [],
        "communities": [],
        "analytics": null,
        "graph_context": null,
        "query_metadata": {
          "execution_time": 0.1,
          "filters_applied": {
            "entity_types": null,
            "document_ids": null
          }
        }
      }
    },
    {
      "test_name": "Graph Statistics",
      "endpoint": "/graph/stats",
      "method": "GET",
      "status": "success",
      "response_time": 264.1298770904541,
      "status_code": 200,
      "error": null,
      "data": {
        "statistics": {
          "total_entities": 1,
          "total_relationships": 1,
          "total_communities": 1,
          "total_documents": 1
        },
        "graph_info": {
          "methodology": "Microsoft GraphRAG",
          "entity_deduplication_threshold": 0.85,
          "leiden_resolution": 1.0,
          "min_community_size": 3
        },
        "timestamp": "2025-08-30T21:14:47.303621"
      }
    },
    {
      "test_name": "Performance Test 3",
      "endpoint": "/graph/create",
      "method": "POST",
      "status": "failure",
      "response_time": 611.4349365234375,
      "status_code": 500,
      "error": null,
      "data": {
        "detail": "Failed to create knowledge graph: 500: Graph construction failed: float division by zero"
      }
    },
    {
      "test_name": "Performance Test 4",
      "endpoint": "/graph/create",
      "method": "POST",
      "status": "failure",
      "response_time": 611.9801998138428,
      "status_code": 500,
      "error": null,
      "data": {
        "detail": "Failed to create knowledge graph: 500: Graph construction failed: float division by zero"
      }
    },
    {
      "test_name": "Performance Test 1",
      "endpoint": "/graph/create",
      "method": "POST",
      "status": "failure",
      "response_time": 736.5670204162598,
      "status_code": 500,
      "error": null,
      "data": {
        "detail": "Failed to create knowledge graph: 500: Graph construction failed: float division by zero"
      }
    },
    {
      "test_name": "Performance Test 0",
      "endpoint": "/graph/create",
      "method": "POST",
      "status": "failure",
      "response_time": 738.3413314819336,
      "status_code": 500,
      "error": null,
      "data": {
        "detail": "Failed to create knowledge graph: 500: Graph construction failed: float division by zero"
      }
    },
    {
      "test_name": "Performance Test 2",
      "endpoint": "/graph/create",
      "method": "POST",
      "status": "failure",
      "response_time": 809.4160556793213,
      "status_code": 500,
      "error": null,
      "data": {
        "detail": "Failed to create knowledge graph: 500: Graph construction failed: float division by zero"
      }
    }
  ],
  "timestamp": "2025-08-30T15:14:48.116654"
}